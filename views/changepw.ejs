<html>
  <head>
    <title>COKE BUST ADMIN</title>
    <link rel='stylesheet' href='/css.css'>
    <link rel="icon" type="image/x-icon" href="/jubertleft.png">
  </head>
  <body>
    <div id='admin'>
      <h1>change password for <%= user.username %></h1>
      <form id='form' method="post" action="/resetPW">
        New PW: <input id = 'password1' type='password' name='password' required><br />
        Confirm: <input id = 'password2' type='password' name='password2' required><br />
        <input type='submit' id='submitButton'>
      </form>

      <div id = 'error'></div>
      <% if (err) { %>
        also <%= err %>
      <% } %>
    </div>
    <script>
      const pw1 = document.getElementById( 'password1' )
      const pw2 = document.getElementById( 'password2' )
      const errEl = document.getElementById('error')
      const badPw = (message, e) => {
        e.preventDefault();
        errEl.textContent = message;
        pw1.value = '';
        pw2.value = '';
      }
      document.getElementById( 'form' ).addEventListener( 'submit', e => {
        if ( pw1.value != pw2.value ) {
          badPw( 'passwords dont match yo', e );
        } else if ( !/(?=.{8,})/.test(pw1.value) ) {
          badPw( '8 characters or longer dumbass', e )
        }
      })
    </script>
  </body>
</html>
